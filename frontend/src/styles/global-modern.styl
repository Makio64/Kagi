// Global Modern Styles for Kagi
// Import this in main.js to apply across the app

@import './tokens-modern.styl'
@import './utilities.styl'

// ========================================
// CSS Reset with Modern Defaults
// ========================================

*,
*::before,
*::after
	box-sizing: border-box
	margin: 0
	padding: 0

// Use CSS logical properties for better i18n support
html
	font-family: var(--font-family)
	font-size: 16px
	line-height: var(--leading-normal)
	color: var(--color-text)
	background: var(--surface-base)
	-webkit-font-smoothing: antialiased
	-moz-osx-font-smoothing: grayscale
	text-size-adjust: 100%
	scroll-behavior: smooth

body
	min-height: 100vh
	position: relative

// ========================================
// Modern Typography Defaults
// ========================================

h1, h2, h3, h4, h5, h6
	font-weight: var(--font-semibold)
	line-height: var(--leading-tight)
	color: var(--color-gray-900)

h1 { font-size: var(--text-3xl) }
h2 { font-size: var(--text-2xl) }
h3 { font-size: var(--text-xl) }
h4 { font-size: var(--text-lg) }
h5 { font-size: var(--text-base) }
h6 { font-size: var(--text-sm) }

p
	margin-block-end: var(--space-4)

a
	color: var(--color-primary-600)
	text-decoration: none
	transition: color var(--transition-base)

	&:hover
		color: var(--color-primary-700)

	&:focus-visible
		outline: 2px solid var(--color-primary-500)
		outline-offset: 2px
		border-radius: var(--radius-sm)

// ========================================
// Modern Form Defaults
// ========================================

button, input, textarea, select
	font-family: inherit
	font-size: inherit
	line-height: inherit

button
	cursor: pointer
	user-select: none

	&:disabled
		cursor: not-allowed
		opacity: 0.6

input,
textarea,
select
	width: 100%
	padding: var(--space-3) var(--space-4)
	border: 1px solid var(--color-border)
	border-radius: var(--radius-md)
	background: var(--surface-base)
	transition: all var(--transition-base)

	&:focus
		outline: none
		border-color: var(--color-primary-500)
		box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.1)

	&::placeholder
		color: var(--color-gray-400)

// ========================================
// Modern Scrollbar Styles
// ========================================

::-webkit-scrollbar
	width: 10px
	height: 10px

::-webkit-scrollbar-track
	background: var(--color-gray-100)
	border-radius: var(--radius-full)

::-webkit-scrollbar-thumb
	background: var(--color-gray-400)
	border-radius: var(--radius-full)
	border: 2px solid var(--color-gray-100)

	&:hover
		background: var(--color-gray-500)

// Firefox
*
	scrollbar-width: thin
	scrollbar-color: var(--color-gray-400) var(--color-gray-100)

// ========================================
// Responsive Images
// ========================================

img, video
	max-width: 100%
	height: auto
	display: block

// ========================================
// Modern Selection Styles
// ========================================

::selection
	background: var(--color-primary-100)
	color: var(--color-primary-900)

// ========================================
// Focus Visible for Accessibility
// ========================================

:focus-visible
	outline: 2px solid var(--color-primary-500)
	outline-offset: 2px

// ========================================
// Print Styles
// ========================================

@media print
	*
		background: transparent !important
		color: black !important
		box-shadow: none !important
		text-shadow: none !important

	a,
	a:visited
		text-decoration: underline

	@page
		margin: 2cm

// ========================================
// Reduced Motion Support
// ========================================

@media (prefers-reduced-motion: reduce)
	*,
	*::before,
	*::after
		animation-duration: 0.01ms !important
		animation-iteration-count: 1 !important
		transition-duration: 0.01ms !important
		scroll-behavior: auto !important

// ========================================
// Container Query Support
// ========================================

@supports (container-type: inline-size)
	.container-responsive
		container-type: inline-size

// ========================================
// Modern Layout Helpers
// ========================================

.visually-hidden
	position: absolute
	width: 1px
	height: 1px
	padding: 0
	margin: -1px
	overflow: hidden
	clip: rect(0, 0, 0, 0)
	white-space: nowrap
	border: 0

.skip-to-content
	position: absolute
	top: -40px
	left: 0
	background: var(--color-primary-500)
	color: white
	padding: var(--space-2) var(--space-4)
	z-index: var(--z-max)
	text-decoration: none
	border-radius: var(--radius-md)

	&:focus
		top: var(--space-2)

// ========================================
// Modern Loading States
// ========================================

.skeleton
	animation: skeleton-loading 1.5s infinite ease-in-out
	background: linear-gradient(
		90deg,
		var(--color-gray-200) 25%,
		var(--color-gray-100) 50%,
		var(--color-gray-200) 75%
	)
	background-size: 200% 100%

@keyframes skeleton-loading
	0%
		background-position: 200% 0
	100%
		background-position: -200% 0

// ========================================
// Utility Animations
// ========================================

@keyframes pulse
	0%, 100%
		opacity: 1
	50%
		opacity: 0.5

@keyframes spin
	from
		transform: rotate(0deg)
	to
		transform: rotate(360deg)

@keyframes bounce
	0%, 100%
		transform: translateY(0)
	50%
		transform: translateY(-10px)

.animate-pulse
	animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite

.animate-spin
	animation: spin 1s linear infinite

.animate-bounce
	animation: bounce 1s infinite